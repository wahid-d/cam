@page "/addstudent"
@using cam.Models
@using cam.Services
@inject NavigationManager NavigationManager
@inject IStudentService studentRepo

<section class="page-body">
    <div class="form-wrapper card">
        <form>
            <h2 class="title-1">Register a student</h2>
            <label class="label-1" for="ename">Engish name<small>*</small></label>
            <input type="text" id="ename" required @bind="student.EnglishName">
            <label class="label-1" for="kname">Korean name<small>*</small></label>
            <input type="text" id="kname" required @bind="student.KoreanName">
            <label class="label-1" for="level">level<small>*</small></label>
            <select type="numeric" id="level" required @bind="student.Level">
                @foreach (var level in levels)
                {
                    <option value=@level>@level</option>
                }
            </select>
            <label class="label-1" for="phone">phone number<small>*</small></label>
            <input type="tel" id="phone" pattern="[0-9]{3}[0-9]{4}[0-9]{4}" required @bind="student.Phone">
            <label class="label-1" for="birthdate">email</label>
            <input type="date" id="birthdate" @bind="student.Birthdate">
            <label class="label-1" for="address">address</label>
            <input type="address" id="address" @bind="student.Address">
            <button type="submit" class="submit-btn" @onclick="SaveStudent">
                Submit
            </button>
        </form>
    </div>
</section>

@code{
    List<string> levels = new List<string>(){"Primary 1", "Primary 2", "Primary 3", "Primary 4", "Primary 5", "Primary 6"};
    Student student = new Student(){Birthdate = DateTime.Now};

    private void SaveStudent()
    {
        Save(student);
    }

    private async void Save(Student student)
    {
        await studentRepo.Insert(student);
        NavigationManager.NavigateTo("/students", false);
    }

}